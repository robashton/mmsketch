<DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="style.css"></link>
    <script type="text/javascript">
      var TEST = false
    </script>
    <script src="underscore-min.js"></script>
    <script src="jquery.js"></script>
    <script src="hammer.js"></script>
    <script src="jquery.hammer.js"></script>
    <script src="socket.io/socket.io.js"></script>
    <script src="eventable.js"></script>
    <script src="statusdisplay.js"></script>
    <script src="feedbackdisplay.js"></script>
    <script src="feedbacktabs.js"></script>
    <script src="playerlistdisplay.js"></script>
    <script src="sharing.js"></script>
    <script src="game.js"></script>
    <script src="input.js"></script>
    <script src="canvas.js"></script>
    <script src="artpad.js"></script>
    <script src="artpadinput.js"></script>
    <script src="timer.js"></script>
    <script src="personalstatus.js"></script>
    <script src="bootstrap/js/bootstrap.min.js"></script>
   <meta name="viewport" content="width=device-width, maximum-scale=1.0, user-scalable=no">
  </head>
  <body>
    <div id="fb-root"></div>
    <div id="loading">
      <h1>We Draw Things</h1>
      <div id="loading-spinner">
        <div class="bar1"></div>
        <div class="bar2"></div>
        <div class="bar3"></div>
        <div class="bar4"></div>
        <div class="bar5"></div>
        <div class="bar6"></div>
        <div class="bar7"></div>
        <div class="bar8"></div>
        <div class="bar9"></div>
        <div class="bar10"></div>
        <div class="bar11"></div>
        <div class="bar12"></div>
      </div>
      <div id="loading-text">
        <p>Loading - please wait</p>
      </div>
    </div>
    <div id="content" class="container-fluid">
      <div class="row-fluid">
        <div class="span3">
          <h4 id="client-status"></h4>
        </div>
        <div class="span3"></div>
        <div class="span2">
          <h4 id="timer-text"></h4>
        </div>
        <div class="span4">
          <h4 id="client-count"></h4>
        </div>
      </div>
      <div class="row-fluid">
        <div class="span8">
          <canvas id="surface" width="800" height="600">
            Your browser doesn't support Canvas wtf dude?
          </canvas>
          <div class="btn hidden" id="share-drawing"><span>Share this drawing</span></div>
        </div>
        <div class="span4">
          <div id="feedback-container">
          <ul class="nav nav-tabs">
            <li id="client-feedback-tab" class="active">
              <a href="#">Log</a>
            </li>
            <li id="room-feedback-tab"><a href="#">Room</a></li>
          </ul>
          <div id="client-feedback">

          </div>

          <div id="room-feedback">

          </div>
          </div>
        </div>
      </div>
      <div class="row-fluid">
        <div class="span8">
          <div id="client-input-container">
            <input type="text" id="client-input"/>
            <input class="btn btn-success" type="button" value="Guess" id="client-input-button"/>
          </div>
          <div id="client-paintbrush-container">
            <div id="paintbrush-brushes">

            </div>
            <div id="paintbrush-colours">

            </div>
          </div>
        </div>
        <div class="span4">
          <div class="player-info">
            <img src="" id="player-avatar"/>
            <div>
              <h4 id="player-name"></h4>
              <p><strong>Total points</strong>: <span id="player-score"></span></p>
              <p>This game: <span id="player-game-score"></span></p>
            </div>
          </div>
        </div>
      </div>
      
      <div id="footnote">
        <p>Copyright <a href="http://twitter.com/robashton">@robashton</a> 2012</p>
      </div>
    </div>
    <script type="text/javascript">
     
      var game = null
      ,   statusDisplay = null
      ,   feedbackDisplay = null
      ,   roomScoresDisplay = null
      ,   personalStatusDisplay = null
      ,   feedbackTabs = null
      ,   playerListDisplay = null
      ,   sharing = null
      ,   artPad = null
      ,   input = null
      ,   timer = null

      var closeSockets = function() {
        game.stop()
      }

      function onGameStarted() {
        $('#loading').hide()
        $('#content').show()
      }

      if(TEST) {
        var testScript = document.createElement('script')
        var head = document.getElementsByTagName('head')[0]
        testScript.setAttribute('src', 'test.js')
        head.appendChild(testScript)
        testScript.onload = function() {
          $(document).ready(startGame)
        }
      } else {
        $(document).ready(startGame)
      }

      function startGame() {
        game = new Game()
        statusDisplay = new StatusDisplay(game)
        feedbackDisplay = new FeedbackDisplay(game)
        personalStatusDisplay = new PersonalStatusDisplay(game)
        playerListDisplay = new PlayerListDisplay(game)
        sharing = new Sharing(game)
        feedbackTabs = new FeedbackTabs()
        input = new Input(game)
        artPad = new ArtPadInput(game)
        timer = new Timer(game)
        game.on('Started', onGameStarted)
        game.start()
      }
    </script>
    <script src="/fb.js"></script>
  </body>
</html>
